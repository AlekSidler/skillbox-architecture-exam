[ADRs](../chapters/11-adr.md)

# Абстракция доступа к базе данных

## Статус

Accepted

## Контекст

Опции:
1. Отсутствие абстракции
1. Абстракция при помощи библиотеки
1. Абстракция при помощи отдельного сервиса

Мы хотим решить, нужно ли абстрагироваться от базы данных, если да, то какой ценой.

Если хотим, то это возможно сделать как при помощи библиотеки, так и при помощи отдельного сервиса.

При абстракции при помощи библиотеки не нужно создание отдельного сервиса, хотя абстракция при помощи сервиса является более гибким решением.


## Решение

Мы всё же хотим абстрагироваться от базы данных, так как вероятно, мы заменим или будем использовать несколько баз данных, в зависимости от своих нужд.
Реализация библиотеки менее гибкий вариант, так как приходится обходиться одним языком программирования или же подготавливать биндинги для других языков программирования. Также использование миграций затруднено в таких библиотеках.

Поэтому принято решение использовать промежуточный сервис для доступа к данным.

## Последствия

* Упрощённая замена базы данных
* Возможность использования различных баз данных без изменения бизнес логики
* Возможность реализации разделения данных вроде шардинга в случае отсутствия у базы данных такой возможности
* Возможность проведения миграций не затрагивая сервисы бизнес логики.
